@model DAL.RevenueType

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_TrueBookMstr.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        $("#RevenueType1").focus();

        $(":text").css({ "border-radius": "5px" });
        $("select").css({ "border-radius": "5px" });

        $("#RevenueCost").blur(function () {
            var wt = $(this).val();
            $("#RevenueCost").val(parseFloat(wt).toFixed(2));
        });
        $("#MinimumValue").blur(function () {
            var wt = $(this).val();
            $("#MinimumValue").val(parseFloat(wt).toFixed(2));
        });

        $("#btnsave").click(function () {

          
            $.ajax({
                        type: "get",
                        url: "/revenuetype/getrevenuetypename",
                        datatype: "json",
                        data: { name: $('#RevenueType1').val(), achead: $('#AcHeadID option:selected').val() },
                        success: function (data) {
                            if (data.flag == 0) {
                                $("#flag").val('0');
                            }
                            else if (data.flag == 1) {
                                $("#flag").val('1');
                            }
                        }

                    });



            var rev = $("#RevenueType1").val();
            var achead = $("#AcHeadID option:selected").val();
            var revco = $("#RevenueCode").val();

            $("#alert1").hide();
            $("#alert").hide();


            if (rev == "") {
                $("#alert").show();
                return false;
            }
            else if (achead == "") {
                $("#alert").show();
                return false;
            }
            else if (revco == "") {
                $("#alert").show();
                return false;
            }
            else if ($("#flag").val()=="1") {
                $("#alert").hide();
                $("#alert1").show();
                return false;
            }
            else {
                $("#alert1").hide();
                $("#alert").hide();
                return true;
            }


        });


    });
</script>

<section class="content-header">
    <h1 class="headingfont">Revenue Type</h1>

</section>

@if (ViewBag.SuccessMsg != null)
    {
      <script type="text/javascript">
          $(document).ready(function () {
              $.notify("@ViewBag.SuccessMsg", "success");
          });
                                                </script>
    }
<section class="content">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
         <div id="alert" style="color:red;display:none;margin-left:10px;">*Please fill mandatory fields</div>
          <div id="alert1" style="color:red;display:none;margin-left:10px;">*Revenue Type Already Exist</div>
        <fieldset>



            <div class="row no-margin">

                <div class="col-md-3">
                    <input type="hidden" id="flag" />
                    <label class="required headinglabel">Revenue Type</label>
                    @Html.TextBoxFor(model => model.RevenueType1, new { @class = "form-control txttarget" })
                    @Html.ValidationMessageFor(model => model.RevenueType1)

                </div>
                <div class="col-md-3">
                    <label class="required headinglabel">Account Head</label>
                     @Html.DropDownListFor(model => model.AcHeadID, new SelectList(@ViewBag.accounthead, "AcHeadID", "AcHead1"), "Select", new { @class = "form-control" });
                    @*@Html.TextBoxFor(model => model.AcHeadID, new { @class = "form-control" })*@
                    @Html.ValidationMessageFor(model => model.AcHeadID)



                </div>
                <div class="col-md-3">
                    <label class="required headinglabel">Revenue Code</label>
                    @Html.TextBoxFor(model => model.RevenueCode, new { @class = "form-control" })
                   
                    @Html.ValidationMessageFor(model => model.RevenueCode)

                </div>
            </div>

            <div class="row no-margin" style="padding-top: 10px;">

                <div class="col-md-3">
                    <label class="headinglabel">Revenue Cost</label>
                    @Html.TextBoxFor(model => model.RevenueCost, new { @class = "form-control textright",@Value="0" })
                    @Html.ValidationMessageFor(model => model.RevenueCost)

                </div>

                <div class="col-md-3">
                    <label class="headinglabel">Minimum Value</label>
                    @Html.TextBoxFor(model => model.MinimumValue, new { @class = "form-control textright",@Value="0" })
                    @Html.ValidationMessageFor(model => model.MinimumValue)
                </div>
            </div>



            <div class="row no-margin" style="padding-top: 10px">
                <div class="col-xs-12 align-left">

                    <input type="submit" value="Save" class="btn btn-primary btnwidth" id="btnsave" />

                    &nbsp; 
                                           <a href='@Url.Action("Index", "RevenueType", new { id = 0 })' class="btn btn-primary btnwidth" data-toggle="tooltip" data-placement="right" title="Click here">Cancel</a>

                </div>
            </div>
        </fieldset>
    }

</section>

@*@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}*@
